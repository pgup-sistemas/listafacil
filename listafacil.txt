Listafacil - AnÃ¡lise TÃ©cnica Completa
Sistema de GestÃ£o de Listas de DoaÃ§Ã£o Multi-Unidade

ğŸ“‹ SumÃ¡rio Executivo
VisÃ£o Geral do Sistema
O Listafacil v3.0 Ã© uma plataforma web desenvolvida em Laravel + Firebase para gerenciar campanhas de doaÃ§Ã£o de organizaÃ§Ãµes religiosas com mÃºltiplas unidades distribuÃ­das nacionalmente. O sistema elimina a necessidade de listas manuais em WhatsApp, oferecendo uma soluÃ§Ã£o centralizada, em tempo real e sem custos operacionais.
Objetivo Principal
Criar uma plataforma 100% gratuita que permita:

GestÃ£o hierÃ¡rquica (Nacional â†’ Unidades â†’ Campanhas â†’ DoaÃ§Ãµes)
DoaÃ§Ãµes sem cadastro prÃ©vio (friction-free)
ConfirmaÃ§Ã£o simplificada para administradores
Compliance fiscal com exportaÃ§Ã£o para balancete
Escala nacional (~30.000 usuÃ¡rios em mÃºltiplas unidades)

Proposta de Valor

"Doar sem login, gerenciar com link, editar por PIN, confirmar em 1 clique, custo ZERO."


ğŸ¯ AnÃ¡lise do Problema e SoluÃ§Ã£o
Problema CrÃ­tico Identificado
1. DesorganizaÃ§Ã£o Operacional
SituaÃ§Ã£o Atual:

Listas de doaÃ§Ã£o circulam como mensagens de WhatsApp
InformaÃ§Ãµes se perdem no histÃ³rico de conversas
MÃºltiplas versÃµes desatualizadas circulam simultaneamente
ImpossÃ­vel consolidar dados de mÃºltiplas unidades

Impacto:

Perda de tempo dos voluntÃ¡rios (estimado 5-10h/mÃªs por unidade)
Retrabalho constante
Falta de transparÃªncia
DesistÃªncia de doadores por frustraÃ§Ã£o

2. Barreira de Acesso
SituaÃ§Ã£o Atual:

Idosos e pessoas com baixa alfabetizaÃ§Ã£o tÃªm dificuldade
Processo de copiar/colar confunde usuÃ¡rios
FormataÃ§Ã£o do WhatsApp causa erros
Sem opÃ§Ã£o para deficientes visuais

Impacto:

ExclusÃ£o de 30-40% do pÃºblico-alvo potencial
ReduÃ§Ã£o no volume de doaÃ§Ãµes
Sobrecarga do administrador com dÃºvidas

3. Falta de Compliance Fiscal
SituaÃ§Ã£o Atual:

Sem registro confiÃ¡vel de doaÃ§Ãµes
ImpossÃ­vel gerar relatÃ³rios para balancete
Comprovantes perdidos ou desorganizados
Dificuldade em comprovar doaÃ§Ãµes para IR

Impacto:

Risco de auditoria fiscal
Perda de benefÃ­cios fiscais para doadores
Falta de prestaÃ§Ã£o de contas transparente

SoluÃ§Ã£o Proposta: Arquitetura TÃ©cnica
Stack TecnolÃ³gico Escolhido
Backend: Laravel 10+

Framework PHP robusto e maduro
Eloquent ORM para manipulaÃ§Ã£o de dados
Sistema de validaÃ§Ã£o integrado
Suporte nativo a filas e jobs
Excelente documentaÃ§Ã£o

Database: Firebase Firestore

Banco NoSQL real-time
1GB free tier (suficiente para MVP)
AtualizaÃ§Ã£o automÃ¡tica de dados
Escalabilidade horizontal nativa
Backup automÃ¡tico incluÃ­do

Storage: Firebase Storage

5GB free tier para comprovantes
CDN global integrado
URLs temporÃ¡rias para seguranÃ§a
Regras de seguranÃ§a granulares

Hosting: Firebase Hosting

10GB bandwidth/mÃªs gratuito
SSL automÃ¡tico
Deploy simplificado
Performance otimizada

Frontend: Blade + Alpine.js

Templates Blade (Laravel)
Alpine.js para interatividade leve
TailwindCSS para UI responsiva
Progressive Web App (PWA) capabilities

Por Que Esta Stack?
1. Custo Zero Garantido
Firebase Free Tier (Spark Plan):
- Firestore: 1GB storage + 50k reads/dia + 20k writes/dia
- Storage: 5GB + 1GB/dia download
- Hosting: 10GB/mÃªs bandwidth

Estimativa de Uso Real:
- 30 unidades Ã— 10 campanhas/ano = 300 campanhas
- 300 campanhas Ã— 100 doaÃ§Ãµes = 30.000 doaÃ§Ãµes/ano
- 30.000 Ã— 0.5MB comprovante = 15GB/ano (rotaÃ§Ã£o de 60 dias)
- Storage real usado: ~2.5GB (com rotaÃ§Ã£o)

âœ… Sistema opera confortavelmente no free tier
2. Real-Time Nativo

Firestore sincroniza dados instantaneamente
Admin vÃª doaÃ§Ãµes aparecerem em tempo real
Doadores veem lista atualizar automaticamente
Zero polling, zero lag

3. Escalabilidade Horizontal

Firebase escala automaticamente
Sem preocupaÃ§Ã£o com picos de acesso
Suporta campanhas virais inesperadas

4. ManutenÃ§Ã£o Simplificada

Backup automÃ¡tico do Firebase
Sem gerenciamento de servidor
AtualizaÃ§Ãµes transparentes
Monitoramento integrado


ğŸ“Š AnÃ¡lise de Requisitos Detalhada
Requisitos Funcionais Priorizados
RF-CORE: Funcionalidades Essenciais (Prioridade CrÃ­tica)
IDRequisitoComplexidadeDependÃªnciasEstimativaRF-C01Criar campanha com metadados completosMÃ©diaDatabase, Auth8hRF-C02Doar sem login (nome + contato opcional)AltaFirestore, Validation12hRF-C03Gerar PIN Ãºnico por doaÃ§Ã£oBaixaUUID generator3hRF-C04Anexar comprovante PIX (upload)MÃ©diaStorage, Validation6hRF-C05Confirmar doaÃ§Ã£o em 1 clique (admin)BaixaFirestore update4hRF-C06Lista real-time de doaÃ§ÃµesAltaFirestore listeners10hRF-C07Compartilhar campanha (link + QR)BaixaQR library4hRF-C08Exportar CSV para balanceteMÃ©diaExport service6hRF-C09Multi-unidade (hierarquia)AltaRBAC, Scopes16hRF-C10Limpeza automÃ¡tica de comprovantes (60d)MÃ©diaCloud Functions, Cron8h
Total Estimado Core: ~77 horas
RF-SEC: Funcionalidades SecundÃ¡rias (Prioridade Alta)
IDRequisitoComplexidadeEstimativaRF-S01Editar campanha (sem afetar doaÃ§Ãµes)Baixa4hRF-S02Buscar doaÃ§Ã£o por nome (recuperar PIN)MÃ©dia5hRF-S03Rejeitar comprovante com motivoBaixa3hRF-S04Filtros de doaÃ§Ã£o (status, tipo, forma)MÃ©dia6hRF-S05ConfirmaÃ§Ã£o em loteMÃ©dia8hRF-S06Dashboard consolidado nacionalAlta12hRF-S07Mensagem pronta para WhatsAppBaixa4hRF-S08Configurar chave PIX por unidadeBaixa3hRF-S09Gerenciar admins de unidadeMÃ©dia10hRF-S10PriorizaÃ§Ã£o visual de pendÃªnciasBaixa5h
Total Estimado SecundÃ¡rio: ~60 horas
RF-TER: Funcionalidades TerciÃ¡rias (Prioridade MÃ©dia - v4.0)
IDRequisitoEstimativaRF-T01Sugerir novo item (aprovaÃ§Ã£o admin)6hRF-T02NotificaÃ§Ã£o email (nova doaÃ§Ã£o)8hRF-T03Lembrete automÃ¡tico (doaÃ§Ã£o nÃ£o cumprida)10hRF-T04Dashboard com grÃ¡ficos12hRF-T05Auto-encerramento (data/meta)6hRF-T06Ranking de unidades8hRF-T07Duplicar campanha (template)5hRF-T08NotificaÃ§Ã£o sonora (real-time)4hRF-T09Atalhos de teclado6hRF-T10Metas nacionais agregadas8h
Total Estimado TerciÃ¡rio: ~73 horas
Requisitos NÃ£o Funcionais CrÃ­ticos
RNF-Performance
MÃ©tricas ObrigatÃ³rias:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ©trica              â”‚ Meta      â”‚ MediÃ§Ã£o         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FCP (First Paint)    â”‚ < 1.5s    â”‚ Lighthouse      â”‚
â”‚ LCP (Largest Paint)  â”‚ < 2.5s    â”‚ Lighthouse      â”‚
â”‚ TTI (Interactive)    â”‚ < 3.0s    â”‚ Lighthouse      â”‚
â”‚ Upload comprovante   â”‚ < 5s (3G) â”‚ Firebase Perf   â”‚
â”‚ Firestore read       â”‚ < 100ms   â”‚ Firebase Consoleâ”‚
â”‚ Real-time sync       â”‚ < 500ms   â”‚ Custom metric   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
EstratÃ©gias de OtimizaÃ§Ã£o:

Lazy loading de imagens
Code splitting (Alpine.js)
Firestore indexes otimizados
CDN para assets estÃ¡ticos
CompressÃ£o de imagens (client-side)

RNF-Usabilidade (WCAG 2.1 AA)
Checklist ObrigatÃ³rio:
âœ… Contraste mÃ­nimo 4.5:1 (texto normal)
âœ… Contraste mÃ­nimo 3:1 (texto grande)
âœ… BotÃµes mÃ­nimo 44Ã—44px (mobile)
âœ… Fonte mÃ­nima 16px (corpo), 18px (botÃµes)
âœ… NavegaÃ§Ã£o por teclado completa
âœ… Labels semÃ¢nticos (screen readers)
âœ… Mensagens de erro claras
âœ… FormulÃ¡rios com validaÃ§Ã£o inline
âœ… Estados visuais claros (hover, focus, disabled)
âœ… Linguagem nÃ­vel 5Âª sÃ©rie (Flesch Reading Ease > 60)
Ferramentas de Teste:

WAVE (WebAIM)
axe DevTools
Lighthouse Accessibility Audit
Color Contrast Analyzer

RNF-SeguranÃ§a
Camadas de ProteÃ§Ã£o:

AutenticaÃ§Ã£o de Admin

php// Laravel Sanctum para API tokens
// Firebase Auth para sessÃµes
// Bcrypt para senhas (cost 12)
```

2. **AutorizaÃ§Ã£o HierÃ¡rquica**
```
NACIONAL â†’ pode tudo
UNIDADE â†’ apenas sua unidade
MODERADOR â†’ apenas confirmar doaÃ§Ãµes

ValidaÃ§Ã£o de Input

php// Laravel Request Validation
'nome' => 'required|min:3|max:100|regex:/^[\pL\s\-]+$/u',
'valor' => 'required|numeric|min:0.01|max:999999.99',
'comprovante' => 'required|file|mimes:jpg,png,pdf|max:5120',

Firebase Security Rules

javascript// Firestore Rules
match /campanhas/{campanhaId} {
  allow read: if true; // PÃºblico pode ler
  allow write: if request.auth != null; // Apenas autenticados
}

// Storage Rules
match /comprovantes/{file} {
  allow read: if request.auth != null;
  allow write: if request.resource.size < 5 * 1024 * 1024
                && request.resource.contentType.matches('image/.*|application/pdf');
}

Rate Limiting

php// Laravel Throttle Middleware
RateLimiter::for('donations', function (Request $request) {
    return Limit::perHour(10)->by($request->ip());
});

CAPTCHA

html<!-- reCAPTCHA v3 (invisÃ­vel) -->
<!-- Score mÃ­nimo: 0.5 -->
<!-- Apenas em produÃ§Ã£o -->
```

#### RNF-Disponibilidade

**SLA Targets:**
```
Uptime:         99.9% (permitido 43 min downtime/mÃªs)
RTO:            < 4 horas (Recovery Time Objective)
RPO:            < 1 hora (Recovery Point Objective)
Backup:         AutomÃ¡tico diÃ¡rio (Firebase nativo)
RetenÃ§Ã£o:       30 dias de backups
Monitoramento:  Firebase Crashlytics + Performance
EstratÃ©gias de ResiliÃªncia:

Firestore offline persistence (PWA)
Graceful degradation (sem JS)
Retry lÃ³gico em uploads
Health check endpoints


ğŸ—„ï¸ Modelagem de Dados
Estrutura Firestore (NoSQL)
Collection: organizacoes
javascript{
  id: "org_abc123",
  nome: "OrganizaÃ§Ã£o Religiosa Nacional",
  slug: "org-nacional",
  tipo: "religiosa",
  cnpj: "12.345.678/0001-90",
  responsavel: {
    nome: "JoÃ£o Silva",
    email: "joao@org.com",
    telefone: "+5511999999999"
  },
  created_at: Timestamp,
  updated_at: Timestamp
}
Collection: unidades
javascript{
  id: "unidade_sp01",
  organizacao_id: "org_abc123",
  nome: "Unidade SÃ£o Paulo - Centro",
  cidade: "SÃ£o Paulo",
  estado: "SP",
  endereco: {
    rua: "Rua Exemplo, 123",
    cep: "01234-567"
  },
  chave_pix: "unidadesp@org.com", // PIX da unidade
  responsavel: {
    nome: "Maria Costa",
    email: "maria@unidadesp.org",
    telefone: "+5511888888888"
  },
  status: "ativa", // ativa | inativa
  created_at: Timestamp,
  updated_at: Timestamp
}
Collection: campanhas
javascript{
  id: "camp_natal2025",
  unidade_id: "unidade_sp01",
  titulo: "Campanha Natal 2025",
  descricao: "ArrecadaÃ§Ã£o de alimentos e brinquedos",
  token: "abc12345", // URL: /c/abc12345 (Ãºnico, 8 chars)
  
  // ConfiguraÃ§Ãµes
  visibilidade: "publica", // publica | privada | interna
  tipo_doacao: "misto", // itens | dinheiro | misto
  aceita_sugestoes: false, // Doar item nÃ£o listado
  
  // Metas (opcionais)
  meta_financeira: 10000.00,
  meta_itens: 100,
  
  // PerÃ­odo
  data_inicio: Timestamp,
  data_fim: Timestamp,
  
  // Status
  status: "ativa", // ativa | pausada | encerrada
  
  // EstatÃ­sticas (cache)
  stats: {
    total_doacoes: 45,
    total_confirmadas: 30,
    total_pendentes: 15,
    total_arrecadado: 5230.50,
    total_itens: 67
  },
  
  created_at: Timestamp,
  updated_at: Timestamp,
  encerrada_at: Timestamp | null
}
Collection: itens_campanha (opcional, prÃ©-definidos)
javascript{
  id: "item_001",
  campanha_id: "camp_natal2025",
  nome: "Arroz 5kg",
  categoria: "alimentos",
  quantidade_meta: 50,
  quantidade_prometida: 35,
  quantidade_entregue: 30,
  ordem: 1, // Ordem de exibiÃ§Ã£o
  ativo: true
}
Collection: doadores
javascript{
  id: "doador_uuid",
  nome: "Pedro Santos",
  telefone: "+5511777777777",
  email: "pedro@email.com",
  cpf: "123.456.789-00", // Opcional, para IR
  
  // HistÃ³rico
  total_doacoes: 5,
  total_doado: 250.00,
  primeira_doacao: Timestamp,
  ultima_doacao: Timestamp,
  
  created_at: Timestamp,
  updated_at: Timestamp
}
Collection: doacoes
javascript{
  id: "doacao_uuid",
  campanha_id: "camp_natal2025",
  doador_id: "doador_uuid",
  
  // IdentificaÃ§Ã£o (redundÃ¢ncia para performance)
  doador_nome: "Pedro Santos",
  doador_telefone: "+5511777777777",
  
  // PIN de ediÃ§Ã£o
  pin: "A1B2C3", // 6 chars alfanumÃ©ricos, Ãºnico
  pin_tentativas: 0, // Bloqueio apÃ³s 3 tentativas
  pin_bloqueado_ate: Timestamp | null,
  
  // Tipo de doaÃ§Ã£o
  tipo: "dinheiro", // item | dinheiro
  
  // Se tipo = item
  item_nome: "Arroz 5kg",
  item_quantidade: 2,
  
  // Se tipo = dinheiro
  valor: 100.00,
  forma_pagamento: "pix", // pix | dinheiro_fisico
  
  // Comprovante (se PIX)
  comprovante: {
    url: "https://storage.firebase.com/...",
    nome_arquivo: "comprovante_20250102.jpg",
    tamanho: 1024567, // bytes
    anexado_em: Timestamp,
    excluido_em: Timestamp | null // ApÃ³s 60 dias do export
  },
  
  // Status
  status: "prometido", // prometido | aguardando | confirmado | entregue | cancelado | expirado
  status_historico: [
    { status: "prometido", data: Timestamp, responsavel: null },
    { status: "aguardando", data: Timestamp, responsavel: null },
    { status: "confirmado", data: Timestamp, responsavel: "admin_uuid" }
  ],
  
  // ConfirmaÃ§Ã£o
  confirmado_por: "admin_uuid",
  confirmado_em: Timestamp | null,
  motivo_rejeicao: null, // Se rejeitado
  
  // SolicitaÃ§Ã£o de confirmaÃ§Ã£o (dinheiro fÃ­sico)
  solicitou_confirmacao: false,
  solicitou_em: Timestamp | null,
  
  // PriorizaÃ§Ã£o
  prioridade: "normal", // urgente | alta | media | normal
  
  // Auditoria
  created_at: Timestamp,
  updated_at: Timestamp,
  cancelado_at: Timestamp | null,
  cancelado_por: "doador" | "admin" | "sistema"
}
Collection: usuarios (Admins)
javascript{
  id: "admin_uuid",
  nome: "Maria Admin",
  email: "maria@org.com",
  telefone: "+5511666666666",
  senha_hash: "bcrypt...", // Laravel bcrypt
  
  // PermissÃµes
  role: "unidade", // nacional | unidade | moderador
  unidade_id: "unidade_sp01", // null se nacional
  
  // Firebase Auth
  firebase_uid: "firebase_uid_xyz",
  
  // Status
  ativo: true,
  ultimo_acesso: Timestamp,
  
  created_at: Timestamp,
  updated_at: Timestamp
}
Collection: exports (Auditoria)
javascript{
  id: "export_uuid",
  campanha_id: "camp_natal2025",
  tipo: "balancete", // balancete | doadores | completo
  
  // Arquivo gerado
  arquivo: {
    url: "https://storage.firebase.com/exports/...",
    nome: "balancete_natal2025_20250115.csv",
    tamanho: 45678,
    hash_md5: "abc123def456..."
  },
  
  // Metadados
  total_registros: 150,
  total_valor: 15230.50,
  periodo: {
    inicio: Timestamp,
    fim: Timestamp
  },
  
  // Auditoria
  gerado_por: "admin_uuid",
  gerado_em: Timestamp,
  
  created_at: Timestamp
}
Ãndices Firestore NecessÃ¡rios
javascript// Composite Indexes (firebase console)
campanhas:
  - unidade_id ASC, status ASC, created_at DESC
  - token ASC (unique)

doacoes:
  - campanha_id ASC, status ASC, created_at DESC
  - campanha_id ASC, prioridade DESC, created_at DESC
  - pin ASC (unique)
  - doador_id ASC, created_at DESC

doadores:
  - nome ASC, created_at DESC (para busca)
  - cpf ASC (se fornecido, para busca)

usuarios:
  - email ASC (unique)
  - unidade_id ASC, ativo ASC
```

---

## ğŸ—ï¸ Arquitetura do Sistema

### Diagrama de Componentes
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAMADA DE APRESENTAÃ‡ÃƒO                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PÃ¡ginas       â”‚  â”‚   Componentes   â”‚  â”‚   Assets    â”‚ â”‚
â”‚  â”‚   PÃºblicas      â”‚  â”‚   Alpine.js     â”‚  â”‚   CSS/JS    â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ - Home          â”‚  â”‚ - ListaReal     â”‚  â”‚ - Tailwind  â”‚ â”‚
â”‚  â”‚ - Campanha      â”‚  â”‚ - FormDoacao    â”‚  â”‚ - Alpine    â”‚ â”‚
â”‚  â”‚ - Doar          â”‚  â”‚ - UploadComp    â”‚  â”‚ - QRCode    â”‚ â”‚
â”‚  â”‚ - MinhaDoacao   â”‚  â”‚ - Dashboard     â”‚  â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PÃ¡ginas Admin (Auth Required)                        â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚ - Dashboard | Campanhas | DoaÃ§Ãµes | Unidades          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ HTTP/HTTPS
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAMADA DE APLICAÃ‡ÃƒO                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Laravel 10+ (PHP 8.2)                    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Controllers  â”‚  â”‚ Middleware   â”‚  â”‚ Requests     â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ - Campanha   â”‚  â”‚ - Auth       â”‚  â”‚ - ValidaÃ§Ã£o  â”‚      â”‚
â”‚  â”‚ - Doacao     â”‚  â”‚ - RateLimit  â”‚  â”‚ - Sanitize   â”‚      â”‚
â”‚  â”‚ - Admin      â”‚  â”‚ - CORS       â”‚  â”‚ - Transform  â”‚      â”‚
â”‚  â”‚ - Export     â”‚  â”‚ - Logging    â”‚  â”‚              â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              Services (Business Logic)           â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ - CampanhaService    | - ExportService           â”‚       â”‚
â”‚  â”‚ - DoacaoService      | - NotificationService     â”‚       â”‚
â”‚  â”‚ - UploadService      | - QRCodeService           â”‚       â”‚
â”‚  â”‚ - AuthService        | - RetentionService        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              Jobs & Queues                       â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ - LimparComprovantesJob (diÃ¡rio)                 â”‚       â”‚
â”‚  â”‚ - EnviarNotificacaoJob                           â”‚       â”‚
â”‚  â”‚ - GerarExportJob                                 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ SDK
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CAMADA DE PERSISTÃŠNCIA                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Firebase Firestoreâ”‚         â”‚  Firebase Storage  â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ - organizacoes     â”‚         â”‚ - /comprovantes    â”‚      â”‚
â”‚  â”‚ - unidades         â”‚         â”‚ - /exports         â”‚      â”‚
â”‚  â”‚ - campanhas        â”‚         â”‚ - /temp            â”‚      â”‚
â”‚  â”‚ - doacoes          â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚ - doadores         â”‚                                     â”‚
â”‚  â”‚ - usuarios         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ - exports          â”‚         â”‚  Firebase Auth     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚                                 â”‚ - SessÃµes Admin    â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ - Tokens JWT       â”‚      â”‚
â”‚  â”‚  Cache (Redis)     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚
â”‚  â”‚ - Stats campanhas  â”‚                                     â”‚
â”‚  â”‚ - Rate limiting    â”‚                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Fluxo de Dados Real-Time
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DOADOR     â”‚
â”‚  (Browser)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. Preenche formulÃ¡rio "Doar"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Laravel Controller              â”‚
â”‚  DoacaoController@store          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. Valida dados
       â”‚ 3. Gera PIN Ãºnico
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DoacaoService                   â”‚
â”‚  - validarDoacao()               â”‚
â”‚  - gerarPIN()                    â”‚
â”‚  - vincularDoador()              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. Salva no Firestore
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firebase Firestore              â”‚
â”‚  Collection: doacoes             â”‚
â”‚  Document: {doacao_uuid}         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 5. Real-time listener detecta mudanÃ§a
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN (Browser)                 â”‚
â”‚  Dashboard aberto                â”‚
â”‚  âœ¨ DoaÃ§Ã£o aparece INSTANTÃ‚NEA  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PadrÃµes de Design Aplicados
1. Repository Pattern (AbstraÃ§Ã£o de Dados)
php// app/Repositories/DoacaoRepository.php
interface DoacaoRepositoryInterface {
    public function create(array $data): Doacao;
    public function findByPIN(string $pin): ?Doacao;
    public function getPendentesPriorizadas(string $campanhaId): Collection;
}

class FirestoreDoacaoRepository implements DoacaoRepositoryInterface {
    // ImplementaÃ§Ã£o especÃ­fica do Firestore
}
2. Service Layer (LÃ³gica de NegÃ³cio)
php// app/Services/DoacaoService.php
class DoacaoService {
    public function __construct(
        private DoacaoRepository $repository,
        private NotificationService $notifier,
        private UploadService $uploader
    ) {}
    
    public function registrarDoacao(array $data): Doacao {
        // ValidaÃ§Ã£o de negÃ³cio
        // GeraÃ§Ã£o de PIN
        // VinculaÃ§Ã£o de doador
        // NotificaÃ§Ã£o de admin
        // Retorno de dados
    }
}
3. Observer Pattern (Real-Time)
javascript// Frontend: Alpine.js + Firestore SDK
firestore.collection('doacoes')
  .where('campanha_id', '==', campanhaId)
  .onSnapshot(snapshot => {
    snapshot.docChanges().forEach(change => {
      if (change.type === 'added')Continuar20:30this.adicionarDoacao(change.doc.data());
if (change.type === 'modified') this.atualizarDoacao(change.doc.data());
if (change.type === 'removed')  this.removerDoacao(change.doc.id);
});
});

#### 4. Factory Pattern (CriaÃ§Ã£o de Objetos)
```php
// app/Factories/PINFactory.php
class PINFactory {
    public static function generate(): string {
        // Gera PIN alfanumÃ©rico Ãºnico
        // Formato: A1B2C3 (6 chars)
        // ValidaÃ§Ã£o de unicidade
    }
}
```

#### 5. Strategy Pattern (Formas de Pagamento)
```php
// app/Strategies/PagamentoStrategy.php
interface PagamentoStrategy {
    public function processar(Doacao $doacao): bool;
}

class PIXStrategy implements PagamentoStrategy { /* ... */ }
class DinheiroFisicoStrategy implements PagamentoStrategy { /* ... */ }
```

---

## ğŸ›£ï¸ Roadmap de ImplementaÃ§Ã£o

### Fase 1: MVP Core (4 semanas) - **Prioridade CrÃ­tica**

#### Semana 1: Setup e AutenticaÃ§Ã£o
Sprint 1.1 - Infraestrutura
â”œâ”€ Setup Laravel + Firebase SDK
â”œâ”€ ConfiguraÃ§Ã£o de ambiente (dev/staging/prod)
â”œâ”€ Firebase projeto (Firestore + Storage + Auth)
â”œâ”€ Estrutura de pastas
â””â”€ Testes de conexÃ£o
Sprint 1.2 - AutenticaÃ§Ã£o
â”œâ”€ Sistema de login admin (Laravel Sanctum)
â”œâ”€ IntegraÃ§Ã£o Firebase Auth
â”œâ”€ Middleware de autorizaÃ§Ã£o
â”œâ”€ Sistema de roles (nacional/unidade/moderador)
â””â”€ Testes de autenticaÃ§Ã£o
EntregÃ¡veis:
âœ… Projeto rodando localmente
âœ… Admin consegue fazer login
âœ… Roles funcionando

#### Semana 2: GestÃ£o de Unidades e Campanhas
Sprint 2.1 - Unidades
â”œâ”€ CRUD de unidades (admin nacional)
â”œâ”€ VinculaÃ§Ã£o de admins a unidades
â”œâ”€ Dashboard de unidades
â””â”€ Testes de permissÃµes
Sprint 2.2 - Campanhas
â”œâ”€ Criar campanha (com metadados)
â”œâ”€ Editar campanha
â”œâ”€ Gerar token Ãºnico
â”œâ”€ Gerar QR Code
â”œâ”€ Listar campanhas da unidade
â””â”€ Testes de campanha
EntregÃ¡veis:
âœ… Admin nacional gerencia unidades
âœ… Admin de unidade cria campanhas
âœ… PÃ¡gina pÃºblica da campanha (view-only)

#### Semana 3: Sistema de DoaÃ§Ãµes
Sprint 3.1 - Doar (Frontend)
â”œâ”€ PÃ¡gina pÃºblica da campanha (lista real-time)
â”œâ”€ FormulÃ¡rio de doaÃ§Ã£o (sem login)
â”œâ”€ SeleÃ§Ã£o de tipo (item/dinheiro)
â”œâ”€ SeleÃ§Ã£o de forma (PIX/fÃ­sico)
â”œâ”€ GeraÃ§Ã£o de PIN
â””â”€ Tela de confirmaÃ§Ã£o
Sprint 3.2 - Doar (Backend)
â”œâ”€ Controller e Service de doaÃ§Ã£o
â”œâ”€ ValidaÃ§Ã£o de dados
â”œâ”€ CriaÃ§Ã£o/vinculaÃ§Ã£o de doador
â”œâ”€ Salvamento no Firestore
â”œâ”€ Real-time listener (admin)
â””â”€ Testes de doaÃ§Ã£o
EntregÃ¡veis:
âœ… Doador consegue doar sem login
âœ… PIN Ã© gerado automaticamente
âœ… DoaÃ§Ã£o aparece em tempo real no admin

#### Semana 4: ConfirmaÃ§Ã£o e Comprovantes
Sprint 4.1 - Comprovantes
â”œâ”€ Upload de comprovante (frontend)
â”œâ”€ ValidaÃ§Ã£o de arquivo (tipo/tamanho)
â”œâ”€ Storage no Firebase Storage
â”œâ”€ VisualizaÃ§Ã£o de comprovante (modal)
â””â”€ Testes de upload
Sprint 4.2 - ConfirmaÃ§Ã£o Admin
â”œâ”€ Lista de doaÃ§Ãµes pendentes (priorizada)
â”œâ”€ Confirmar em 1 clique
â”œâ”€ Rejeitar com motivo
â”œâ”€ Filtros (status, tipo, forma)
â”œâ”€ AtualizaÃ§Ã£o de stats (cache)
â””â”€ Testes de confirmaÃ§Ã£o
EntregÃ¡veis:
âœ… Doador anexa comprovante PIX
âœ… Admin visualiza e confirma
âœ… Stats sÃ£o atualizadas em tempo real
âœ… MVP FUNCIONAL

### Fase 2: Features Essenciais (3 semanas)

#### Semana 5: EdiÃ§Ã£o e RecuperaÃ§Ã£o
Sprint 5.1 - EdiÃ§Ã£o de DoaÃ§Ã£o
â”œâ”€ Acessar por PIN
â”œâ”€ Buscar por nome (recuperaÃ§Ã£o)
â”œâ”€ Editar informaÃ§Ãµes (antes de confirmar)
â”œâ”€ Cancelar doaÃ§Ã£o
â””â”€ Testes de ediÃ§Ã£o
Sprint 5.2 - SeguranÃ§a
â”œâ”€ Rate limiting (uploads, doaÃ§Ãµes)
â”œâ”€ Bloqueio de PIN (3 tentativas)
â”œâ”€ ValidaÃ§Ã£o robusta de inputs
â”œâ”€ CAPTCHA (reCAPTCHA v3)
â””â”€ Testes de seguranÃ§a
EntregÃ¡veis:
âœ… Doador edita doaÃ§Ã£o com PIN
âœ… RecuperaÃ§Ã£o por nome funciona
âœ… Sistema resistente a abuso

#### Semana 6: Dashboard e RelatÃ³rios
Sprint 6.1 - Dashboard Unidade
â”œâ”€ VisÃ£o geral (stats consolidados)
â”œâ”€ GrÃ¡fico de doaÃ§Ãµes (semanal)
â”œâ”€ Lista de campanhas ativas
â”œâ”€ Alertas de pendÃªncias
â””â”€ Testes de dashboard
Sprint 6.2 - ExportaÃ§Ã£o
â”œâ”€ Export CSV para balancete
â”œâ”€ Export lista de doadores
â”œâ”€ Metadados de export (auditoria)
â”œâ”€ Download de exports
â””â”€ Testes de exportaÃ§Ã£o
EntregÃ¡veis:
âœ… Admin vÃª dashboard completo
âœ… Export para balancete funciona
âœ… Auditoria de exports registrada

#### Semana 7: Multi-Unidade e Nacional
Sprint 7.1 - Dashboard Nacional
â”œâ”€ VisÃ£o consolidada (todas unidades)
â”œâ”€ Ranking de unidades
â”œâ”€ GrÃ¡ficos comparativos
â”œâ”€ Export consolidado nacional
â””â”€ Testes de dashboard nacional
Sprint 7.2 - Compartilhamento
â”œâ”€ Link direto (otimizado)
â”œâ”€ QR Code (alta resoluÃ§Ã£o)
â”œâ”€ Mensagem pronta WhatsApp
â”œâ”€ BotÃ£o nativo de compartilhamento
â””â”€ Testes de compartilhamento
EntregÃ¡veis:
âœ… Admin nacional vÃª todas unidades
âœ… Export consolidado funciona
âœ… Compartilhamento otimizado

### Fase 3: Compliance e AutomaÃ§Ã£o (2 semanas)

#### Semana 8: RetenÃ§Ã£o de Dados
Sprint 8.1 - PolÃ­tica de RetenÃ§Ã£o
â”œâ”€ Cloud Function (limpeza automÃ¡tica)
â”œâ”€ Job Laravel (trigger diÃ¡rio)
â”œâ”€ LÃ³gica: 60 dias apÃ³s export
â”œâ”€ ManutenÃ§Ã£o de metadados
â””â”€ Testes de retenÃ§Ã£o
Sprint 8.2 - Backup e Auditoria
â”œâ”€ ConfiguraÃ§Ã£o de backup (Firebase)
â”œâ”€ Logs estruturados (Laravel)
â”œâ”€ Auditoria de aÃ§Ãµes crÃ­ticas
â”œâ”€ RelatÃ³rio de integridade
â””â”€ Testes de auditoria
EntregÃ¡veis:
âœ… Comprovantes limpos automaticamente
âœ… Backup automÃ¡tico configurado
âœ… Logs de auditoria completos

#### Semana 9: OtimizaÃ§Ã£o e Deploy
Sprint 9.1 - Performance
â”œâ”€ OtimizaÃ§Ã£o de queries Firestore
â”œâ”€ Cache de stats (Redis)
â”œâ”€ Lazy loading de imagens
â”œâ”€ CompressÃ£o de assets
â””â”€ Testes de performance (Lighthouse)
Sprint 9.2 - Deploy ProduÃ§Ã£o
â”œâ”€ ConfiguraÃ§Ã£o Firebase Hosting
â”œâ”€ CI/CD (GitHub Actions)
â”œâ”€ VariÃ¡veis de ambiente
â”œâ”€ Monitoramento (Firebase Analytics)
â””â”€ Testes de produÃ§Ã£o
EntregÃ¡veis:
âœ… Performance otimizada (Lighthouse 90+)
âœ… Deploy automatizado
âœ… Sistema em produÃ§Ã£o
âœ… LANÃ‡AMENTO v3.0

### Fase 4: Features AvanÃ§adas (v4.0 - Futuro)

**Semanas 10-12:**
- NotificaÃ§Ãµes email/WhatsApp
- Lembretes automÃ¡ticos
- SugestÃ£o de itens (aprovaÃ§Ã£o)
- Metas nacionais agregadas
- Dashboard com grÃ¡ficos avanÃ§ados
- Auto-encerramento de campanhas
- Duplicar campanha (template)
- Ranking de doadores

---

## Ã°Å¸"â€¹ Regras de NegÃ³cio Detalhadas

### RN-001: Hierarquia Organizacional
REGRA: Sistema opera em 3 nÃ­veis hierÃ¡rquicos
â”œâ”€ NACIONAL: Acesso total, gerencia unidades
â”œâ”€ UNIDADE: Gerencia apenas prÃ³pria unidade
â””â”€ MODERADOR: Apenas confirma doaÃ§Ãµes da unidade
VALIDAÃ‡Ã•ES:
âœ“ Admin nacional pode acessar qualquer unidade
âœ“ Admin de unidade NÃƒO pode acessar outra unidade
âœ“ Moderador NÃƒO pode criar/editar campanhas
âœ— NÃ£o pode haver unidade sem organizaÃ§Ã£o
âœ— NÃ£o pode remover unidade com campanhas ativas

### RN-002: CriaÃ§Ã£o de Campanha
REGRA: Campanha pertence a uma unidade especÃ­fica
PRÃ‰-REQUISITOS:
âœ“ Admin deve estar autenticado
âœ“ Admin deve ter permissÃ£o (nacional ou unidade)
âœ“ Unidade deve estar ativa
CAMPOS OBRIGATÃ“RIOS:
âœ“ TÃ­tulo (min 5, max 100 chars)
âœ“ DescriÃ§Ã£o (min 10, max 500 chars)
âœ“ Tipo de doaÃ§Ã£o (itens | dinheiro | misto)
âœ“ Visibilidade (pÃºblica | privada | interna)
CAMPOS OPCIONAIS:

Meta financeira (se aceita dinheiro)
Meta de itens (se aceita itens)
Data inÃ­cio/fim
Chave PIX (herda da unidade se nÃ£o especificada)

PÃ“S-CRIAÃ‡ÃƒO:
âœ“ Token Ãºnico gerado automaticamente (8 chars)
âœ“ URL pÃºblica: /c/{token}
âœ“ QR Code gerado automaticamente
âœ“ Status inicial: "ativa"

### RN-003: DoaÃ§Ã£o Sem Login
REGRA: Qualquer pessoa pode doar sem cadastro prÃ©vio
IDENTIFICAÃ‡ÃƒO MÃNIMA:
âœ“ Nome completo (obrigatÃ³rio, min 3 chars)
âœ“ Telefone (opcional, recomendado)
âœ“ Email (opcional, recomendado)
âœ“ CPF (opcional, necessÃ¡rio para declaraÃ§Ã£o IR)
PROCESSO:

Sistema verifica se doador jÃ¡ existe (nome exato)
Se existe: vincula doaÃ§Ã£o ao doador existente
Se nÃ£o existe: cria novo doador automaticamente
DoaÃ§Ã£o Ã© registrada com status "prometido"
PIN Ãºnico Ã© gerado (6 chars alfanumÃ©ricos)
Doador recebe PIN e link de ediÃ§Ã£o

VALIDAÃ‡Ã•ES:
âœ“ Nome nÃ£o pode conter nÃºmeros/caracteres especiais
âœ“ Telefone deve estar no formato +55XXXXXXXXXXX
âœ“ Email deve ser vÃ¡lido (se fornecido)
âœ“ CPF deve ser vÃ¡lido (se fornecido)
âœ— NÃ£o pode doar se campanha estiver pausada/encerrada
âœ— NÃ£o pode doar item que jÃ¡ atingiu meta

### RN-004: PIN de EdiÃ§Ã£o
REGRA: Cada doaÃ§Ã£o gera um PIN Ãºnico para controle
FORMATO:
âœ“ 6 caracteres alfanumÃ©ricos (ex: A1B2C3)
âœ“ Apenas letras maiÃºsculas + nÃºmeros
âœ“ Ãšnico em todo o sistema
FUNCIONALIDADES COM PIN:
âœ“ Ver detalhes completos da doaÃ§Ã£o
âœ“ Editar informaÃ§Ãµes (apenas se status = "prometido")
âœ“ Anexar/substituir comprovante PIX
âœ“ Solicitar confirmaÃ§Ã£o (dinheiro fÃ­sico)
âœ“ Cancelar doaÃ§Ã£o (apenas se status = "prometido")
SEGURANÃ‡A:
âœ“ MÃ¡ximo 3 tentativas incorretas
âœ“ ApÃ³s 3 tentativas: bloqueio de 15 minutos
âœ“ Bloqueio registrado no Firestore
âœ— PIN nÃ£o pode ser alterado pelo doador
âœ— PIN nÃ£o expira (permanente)

### RN-005: RecuperaÃ§Ã£o de PIN
REGRA: Doador pode recuperar PIN por busca nominal
PROCESSO:

Doador acessa "Esqueci meu PIN"
Informa nome completo (exatamente como cadastrou)
Sistema busca doaÃ§Ãµes com aquele nome
Exibe lista de doaÃ§Ãµes (Ãºltimas 5)
Doador seleciona a doaÃ§Ã£o correta
Sistema exibe PIN novamente

VALIDAÃ‡Ã•ES:
âœ“ Nome deve ser exato (case-insensitive)
âœ“ MÃ¡ximo 5 tentativas de busca por hora/IP
âœ— NÃ£o exibe doaÃ§Ãµes de outras pessoas
âœ— NÃ£o funciona se nome tiver mÃºltiplas doaÃ§Ãµes (exige contato admin)

### RN-006: Upload de Comprovante
REGRA: DoaÃ§Ãµes em dinheiro via PIX requerem comprovante
QUANDO OBRIGATÃ“RIO:
âœ“ Tipo = dinheiro
âœ“ Forma de pagamento = PIX
FORMATOS ACEITOS:
âœ“ JPG, JPEG, PNG (imagens)
âœ“ PDF (documentos)
RESTRIÃ‡Ã•ES:
âœ“ Tamanho mÃ¡ximo: 5MB
âœ“ Apenas 1 arquivo por doaÃ§Ã£o
âœ“ Pode substituir comprovante (antes de confirmar)
VALIDAÃ‡Ã•ES:
âœ“ Tipo MIME validado no server
âœ“ ExtensÃ£o validada
âœ“ Tamanho validado (client e server)
âœ— NÃ£o aceita outros formatos (doc, xls, etc)
âœ— NÃ£o aceita mÃºltiplos arquivos
ARMAZENAMENTO:
âœ“ Firebase Storage: /comprovantes/{campanha_id}/{doacao_id}.{ext}
âœ“ URL temporÃ¡ria (vÃ¡lida 1 hora)
âœ“ Acesso apenas para admins autenticados

### RN-007: Status da DoaÃ§Ã£o
REGRA: DoaÃ§Ã£o passa por estados conforme confirmaÃ§Ã£o
FLUXO DE STATUS:
TIPO ITEM:
prometido â†’ entregue
prometido â†’ cancelado
prometido â†’ expirado (nÃ£o entregue em 7 dias)
TIPO DINHEIRO PIX:
prometido â†’ aguardando (comprovante anexado)
aguardando â†’ confirmado (admin confirma)
aguardando â†’ cancelado (admin rejeita)
TIPO DINHEIRO FÃSICO:
prometido â†’ aguardando (doador solicita confirmaÃ§Ã£o)
aguardando â†’ confirmado (admin confirma recebimento)
aguardando â†’ cancelado (admin nÃ£o recebeu)
VALIDAÃ‡Ã•ES:
âœ“ Apenas admin pode mover para "confirmado"
âœ“ Apenas admin pode mover para "entregue"
âœ“ Doador pode cancelar apenas se status = "prometido"
âœ“ Admin pode cancelar a qualquer momento
âœ— Status "confirmado/entregue" Ã© FINAL (nÃ£o pode reverter)
âœ— Doador nÃ£o pode editar apÃ³s confirmaÃ§Ã£o

### RN-008: PriorizaÃ§Ã£o de PendÃªncias
REGRA: Admin vÃª doaÃ§Ãµes priorizadas por urgÃªncia
ORDEM DE PRIORIDADE:

URGENTE (vermelho):

Comprovante anexado hÃ¡ 24h+ sem resposta
Prioridade: "urgente"


ALTA (laranja):

SolicitaÃ§Ã£o de confirmaÃ§Ã£o (dinheiro fÃ­sico)
Comprovante anexado hÃ¡ 12-24h
Prioridade: "alta"


MÃ‰DIA (amarelo):

DoaÃ§Ãµes prometidas hÃ¡ 48h+ sem movimento
Prioridade: "media"


NORMAL (verde):

DoaÃ§Ãµes recentes (menos de 48h)
Prioridade: "normal"



CÃLCULO AUTOMÃTICO:
âœ“ Cloud Function roda a cada 6 horas
âœ“ Atualiza campo "prioridade" no Firestore
âœ“ Admin sempre vÃª lista ordenada por prioridade
NOTIFICAÃ‡Ã•ES:
âœ“ Badge com contador de "URGENTES"
âœ“ Destaque visual (cor de fundo)

### RN-009: ConfirmaÃ§Ã£o em Lote
REGRA: Admin pode confirmar mÃºltiplas doaÃ§Ãµes de uma vez
QUANDO USAR:
âœ“ Eventos presenciais (recebimento em massa)
âœ“ ConfirmaÃ§Ã£o de mÃºltiplos PIX de uma vez
âœ“ Final de campanha (fechamento)
PROCESSO:

Admin seleciona doaÃ§Ãµes (checkbox)
Clica "Confirmar Todas Selecionadas"
Sistema confirma modal: "Confirmar X doaÃ§Ãµes?"
Admin confirma
Sistema processa em background (job)
Admin vÃª progresso (barra)
DoaÃ§Ãµes confirmadas desaparecem da lista

RESTRIÃ‡Ã•ES:
âœ“ MÃ¡ximo 50 doaÃ§Ãµes por lote
âœ“ Apenas doaÃ§Ãµes no status "aguardando"
âœ— NÃ£o pode confirmar se campanha encerrada
âœ— NÃ£o pode reverter confirmaÃ§Ã£o em lote

### RN-010: ExportaÃ§Ã£o para Balancete
REGRA: Admin exporta dados fiscais em formato CSV
QUANDO EXPORTAR:
âœ“ Mensal (para balancete mensal)
âœ“ Ao encerrar campanha
âœ“ Para declaraÃ§Ã£o de IR
âœ“ Para auditoria interna
FORMATO CSV:
Data,Doador,CPF,Tipo,Valor,Forma Pagamento,Status,Confirmado Em
02/01/2025,JoÃ£o Silva,123.456.789-00,Dinheiro,100.00,PIX,Confirmado,02/01/2025 14:30
02/01/2025,Maria Costa,-,Item,0.00,Entrega,Entregue,03/01/2025 10:15
COLUNAS OBRIGATÃ“RIAS:
âœ“ Data da doaÃ§Ã£o
âœ“ Nome do doador
âœ“ CPF (ou "-" se nÃ£o fornecido)
âœ“ Tipo (item | dinheiro)
âœ“ Valor (R$) ou "0.00" se item
âœ“ Forma de pagamento
âœ“ Status final
âœ“ Data de confirmaÃ§Ã£o
METADADOS:
âœ“ Hash MD5 do arquivo (integridade)
âœ“ Total de registros
âœ“ Total arrecadado
âœ“ Data/hora do export
âœ“ Admin responsÃ¡vel
PÃ“S-EXPORT:
âœ“ Registra em collection "exports" (auditoria)
âœ“ Inicia contagem de 60 dias para limpeza de comprovantes
âœ— NÃ£o inclui doaÃ§Ãµes canceladas
âœ— NÃ£o inclui doaÃ§Ãµes "prometido" (nÃ£o confirmadas)

### RN-011: RetenÃ§Ã£o de Comprovantes
REGRA: Comprovantes sÃ£o excluÃ­dos 60 dias apÃ³s export
MOTIVAÃ‡ÃƒO:
âœ“ Compliance LGPD (minimizaÃ§Ã£o de dados)
âœ“ Economia de storage
âœ“ Dados fiscais preservados (metadados)
PROCESSO:

Admin exporta balancete da campanha
Sistema registra data do export
Cloud Function roda diariamente (cron)
Identifica comprovantes com 60+ dias desde export
Exclui arquivo fÃ­sico do Storage
MantÃ©m metadado: "comprovante_excluido: true"

O QUE Ã‰ MANTIDO:
âœ“ Nome do doador
âœ“ Valor doado
âœ“ Data da doaÃ§Ã£o
âœ“ Data de confirmaÃ§Ã£o
âœ“ Status final
âœ“ Flag: "comprovante_excluido: true"
O QUE Ã‰ EXCLUÃDO:
âœ— Arquivo de imagem (JPG/PNG/PDF)
âœ— URL de download
âœ— Metadados do arquivo (tamanho, hash)
VALIDAÃ‡Ã•ES:
âœ“ Apenas comprovantes de campanhas EXPORTADAS
âœ“ Apenas comprovantes com status "confirmado"
âœ— NÃ£o exclui se campanha ainda ativa
âœ— NÃ£o exclui se export ainda nÃ£o foi feito

### RN-012: Compartilhamento de Campanha
REGRA: Campanha pode ser compartilhada de mÃºltiplas formas
MÃ‰TODOS DISPONÃVEIS:

LINK DIRETO:

Formato: https://listafacil.com.br/c/{token}
Token: 8 caracteres alfanumÃ©ricos
Ãšnico e permanente
Funciona em qualquer app/navegador


QR CODE:

Gerado automaticamente
Alta resoluÃ§Ã£o (300 DPI)
Formato PNG
Download direto pelo admin
Ideal para impressÃ£o (cartazes, folhetos)


MENSAGEM PRONTA WHATSAPP:

Texto prÃ©-formatado com emojis
Inclui itens prioritÃ¡rios (5 primeiros)
Inclui Ãºltimos doadores (3 nomes)
Inclui link direto
BotÃ£o "Copiar para WhatsApp"


BOTÃƒO NATIVO:

Usa Web Share API (navigator.share())
Compartilha em qualquer app instalado
Fallback: copia link se nÃ£o suportado



CUSTOMIZAÃ‡ÃƒO:
âœ“ Admin pode editar texto introdutÃ³rio
âœ“ Admin pode escolher quais itens destacar
âœ“ Admin pode ocultar nomes de doadores
âœ— NÃ£o pode customizar o token (gerado automaticamente)

---

## ğŸ”’ EstratÃ©gias de SeguranÃ§a

### SeguranÃ§a em Camadas

#### Layer 1: Frontend (ValidaÃ§Ã£o Client-Side)
```javascript
// ValidaÃ§Ã£o bÃ¡sica antes de enviar
Alpine.data('formDoacao', () => ({
  validarNome(nome) {
    return nome.length >= 3 && /^[\pL\s\-]+$/u.test(nome);
  },
  
  validarValor(valor) {
    return valor > 0 && valor <= 999999.99;
  },
  
  validarComprovante(file) {
    const tipos = ['image/jpeg', 'image/png', 'application/pdf'];
    const tamanho = 5 * 1024 * 1024; // 5MB
    return tipos.includes(file.type) && file.size <= tamanho;
  }
}));
```

#### Layer 2: Backend (ValidaÃ§Ã£o Server-Side)
```php
// app/Http/Requests/DoacaoRequest.php
class DoacaoRequest extends FormRequest {
    public function rules(): array {
        return [
            'nome' => 'required|min:3|max:100|regex:/^[\pL\s\-]+$/u',
            'telefone' => 'nullable|regex:/^\+55\d{10,11}$/',
            'email' => 'nullable|email:rfc,dns',
            'cpf' => 'nullable|cpf', // Custom rule
            'tipo' => 'required|in:item,dinheiro',
            'valor' => 'required_if:tipo,dinheiro|numeric|min:0.01|max:999999.99',
            'forma_pagamento' => 'required_if:tipo,dinheiro|in:pix,dinheiro_fisico',
            'comprovante' => 'required_if:forma_pagamento,pix|file|mimes:jpg,png,pdf|max:5120'
        ];
    }
    
    protected function prepareForValidation() {
        // SanitizaÃ§Ã£o
        $this->merge([
            'nome' => strip_tags($this->nome),
            'telefone' => preg_replace('/[^0-9+]/', '', $this->telefone),
            'cpf' => preg_replace('/[^0-9]/', '', $this->cpf)
        ]);
    }
}
```

#### Layer 3: Firebase Security Rules
```javascript
// firestore.rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // OrganizaÃ§Ãµes (apenas leitura pÃºblica)
    match /organizacoes/{orgId} {
      allow read: if true;
      allow write: if request.auth != null && 
                      get(/databases/$(database)/documents/usuarios/$(request.auth.uid)).data.role == 'nacional';
    }
    
    // Unidades
    match /unidades/{unidadeId} {
      allow read: if true;
      allow write: if request.auth != null && (
        get(/databases/$(database)/documents/usuarios/$(request.auth.uid)).data.role == 'nacional' ||
        (get(/databases/$(database)/documents/usuarios/$(request.auth.uid)).data.role == 'unidade' &&
         get(/databases/$(database)/documents/usuarios/$(request.auth.uid)).data.unidade_id == unidadeId)
      );
    }
    
    // Campanhas (leitura pÃºblica, escrita restrita)
    match /campanhas/{campanhaId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && (
        get(/databases/$(database)/documents/usuarios/$(request.auth.uid)).data.role == 'nacional' ||
        get(/databases/$(database)/documents/usuarios/$(request.auth.uid)).data.unidade_id == resource.data.unidade_id
      );
    }
    
    // DoaÃ§Ãµes (leitura pÃºblica, escrita controlada)
    match /doacoes/{doacaoId} {
      allow read: if true;
      allow create: if true; // Qualquer um pode doar
      allow update: if request.auth != null || // Admin
                       request.resource.data.pin == resource.data.pin; // Doador com PIN
      allow delete: if request.auth != null; // Apenas admin
    }
    
    // Doadores (acesso restrito)
    match /doadores/{doadorId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // UsuÃ¡rios (apenas prÃ³prio perfil)
    match /usuarios/{userId} {
      allow read: if request.auth != null && request.auth.uid == userId;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}

// storage.rules
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    
    // Comprovantes (upload pÃºblico, leitura restrita)
    match /comprovantes/{campanhaId}/{doacaoId}.{ext} {
      allow read: if request.auth != null; // Apenas admins
      allow write: if request.resource.size < 5 * 1024 * 1024 && // 5MB
                      request.resource.contentType.matches('image/.*|application/pdf');
    }
    
    // Exports (apenas admins)
    match /exports/{file} {
      allow read, write: if request.auth != null;
    }
  }
}
```

#### Layer 4: Rate Limiting
```php
// app/Http/Kernel.php
protected $middlewareGroups = [
    'api' => [
        'throttle:api', // 60 requests/min padrÃ£o
    ],
];

// routes/api.php
Route::middleware('throttle:donations')->group(function () {
    Route::post('/doacoes', [DoacaoController::class, 'store']);
});

// app/Providers/RouteServiceProvider.php
RateLimiter::for('donations', function (Request $request) {
    return Limit::perHour(10)->by($request->ip())
        ->response(function () {
            return response()->json([
                'message' => 'VocÃª atingiu o limite de doaÃ§Ãµes por hora. Tente novamente mais tarde.'
            ], 429);
        });
});
```

#### Layer 5: CAPTCHA (reCAPTCHA v3)
```php
// app/Services/CaptchaService.php
class CaptchaService {
    public function verify(string $token): bool {
        $response = Http::asForm()->post('https://www.google.com/recaptcha/api/siteverify', [
            'secret' => config('services.recaptcha.secret'),
            'response' => $token,
        ]);
        
        $data = $response->json();
        
        // Score mÃ­nimo: 0.5 (0.0 = bot, 1.0 = humano)
        return $data['success'] && $data['score'] >= 0.5;
    }
}

// app/Http/Controllers/DoacaoController.php
public function store(DoacaoRequest $request, CaptchaService $captcha) {
    if (!$captcha->verify($request->input('captcha_token'))) {
        return response()->json(['message' => 'Falha na verificaÃ§Ã£o de seguranÃ§a.'], 403);
    }
    
    // Processar doaÃ§Ã£o...
}
```

---

## ğŸ“ˆ Estimativa de Custos e Infraestrutura

### Custos Operacionais (Firebase Free Tier)

#### Limites Gratuitos (Spark Plan)
FIRESTORE:
â”œâ”€ Storage: 1 GB
â”œâ”€ Reads: 50.000/dia
â”œâ”€ Writes: 20.000/dia
â””â”€ Deletes: 20.000/dia
STORAGE:
â”œâ”€ Storage: 5 GB
â”œâ”€ Download: 1 GB/dia
â””â”€ Upload: ilimitado
HOSTING:
â”œâ”€ Storage: 10 GB
â””â”€ Bandwidth: 10 GB/mÃªs
AUTH:
â””â”€ UsuÃ¡rios: ilimitado

#### ProjeÃ§Ã£o de Uso Real (30.000 associados, 30 unidades)

**CenÃ¡rio: 10 campanhas simultÃ¢neas/mÃªs**
CAMPANHAS/ANO: 120 (30 unidades Ã— 4 campanhas/ano)
DOAÃ‡Ã•ES/CAMPANHA: ~250 (mÃ©dia)
DOAÃ‡Ã•ES TOTAIS/ANO: 30.000
FIRESTORE:
â”œâ”€ Storage usado: ~200 MB (metadados)
â”‚  â””â”€ 30.000 doaÃ§Ãµes Ã— 5 KB = 150 MB
â”‚  â””â”€ 3.600 campanhas Ã— 10 KB = 36 MB
â”‚  â””â”€ Buffer: 14 MB
â”‚
â”œâ”€ Reads/dia: ~15.000 (bem abaixo do limite)
â”‚  â””â”€ 500 doadores visualizam campanhas = 5.000 reads
â”‚  â””â”€ 30 admins consultam dashboards = 10.000 reads
â”‚
â””â”€ WritesContinuar20:32/dia: ~200 (muito abaixo do limite)
â””â”€ 150 novas doaÃ§Ãµes/dia (pico)
â””â”€ 50 confirmaÃ§Ãµes/dia
STORAGE:
â”œâ”€ Comprovantes ativos: ~2.5 GB (rotaÃ§Ã£o 60 dias)
â”‚  â””â”€ 30.000 doaÃ§Ãµes/ano Ã— 50% PIX = 15.000
â”‚  â””â”€ 15.000 Ã— 60 dias retenÃ§Ã£o Ã· 365 = ~2.500 ativos
â”‚  â””â”€ 2.500 Ã— 1 MB mÃ©dio = 2.5 GB
â”‚
â””â”€ Download/dia: ~200 MB (admins visualizando)
â””â”€ 100 visualizaÃ§Ãµes Ã— 2 MB = 200 MB
âœ… PERMANECE NO FREE TIER (custo R$ 0,00/mÃªs)

**CenÃ¡rio Extremo: 50 campanhas simultÃ¢neas**
DOAÃ‡Ã•ES/MÃŠS: 12.500 (50 Ã— 250)
FIRESTORE:
â”œâ”€ Writes/dia: ~450 (ainda 77% abaixo do limite)
â””â”€ Reads/dia: ~30.000 (40% abaixo do limite)
STORAGE:
â”œâ”€ Comprovantes: ~4.5 GB (prÃ³ximo ao limite)
â””â”€ Download: ~500 MB/dia (50% do limite)
Ã¢Å¡ Ã¯Â¸ AINDA NO FREE TIER, mas prÃ³ximo dos limites

**Limite para Upgrade (Blaze Plan):**
QUANDO MIGRAR:

Storage > 4.5 GB (90% do limite)
Reads > 45.000/dia (90% do limite)
Download > 900 MB/dia (90% do limite)

CUSTO ESTIMADO NO BLAZE:

Storage: US$ 0.18/GB/mÃªs
Reads: US$ 0.06/100k
Writes: US$ 0.18/100k
Download: US$ 0.12/GB

CENÃRIO DE 100 CAMPANHAS/MÃŠS:

Storage extra: 2 GB Ã— $0.18 = $0.36
Reads extra: 100k Ã— $0.06 = $6.00
Download extra: 5 GB Ã— $0.12 = $0.60
TOTAL: ~US$ 7/mÃªs = R$ 35/mÃªs (cotaÃ§Ã£o R$ 5,00)


### Infraestrutura Laravel

**Hospedagem Recomendada:**
OPÃ‡ÃƒO 1: Hospedagem Compartilhada (MVP)

Hostinger/HostGator: R$ 20-40/mÃªs
PHP 8.2, MySQL, SSL incluso
Suficiente para 10k visitas/mÃªs

OPÃ‡ÃƒO 2: VPS (Crescimento)

DigitalOcean Droplet: US$ 6/mÃªs (R$ 30/mÃªs)
1 GB RAM, 25 GB SSD
EscalÃ¡vel conforme necessÃ¡rio

OPÃ‡ÃƒO 3: Laravel Forge + DigitalOcean

Forge: US$ 12/mÃªs (gerenciamento)
Droplet: US$ 6/mÃªs (servidor)
TOTAL: US$ 18/mÃªs (R$ 90/mÃªs)
Deploy automatizado, backups, monitoramento

RECOMENDAÃ‡ÃƒO:
Iniciar com OpÃ§Ã£o 1 (R$ 30/mÃªs)
Migrar para OpÃ§Ã£o 3 apÃ³s 50+ campanhas simultÃ¢neas

**Custo Total Mensal Estimado:**
FASE MVP (0-10 campanhas/mÃªs):
â”œâ”€ Firebase: R$ 0,00
â”œâ”€ Hospedagem: R$ 30,00
â”œâ”€ DomÃ­nio: R$ 40,00/ano = R$ 3,33/mÃªs
â””â”€ TOTAL: R$ 33,33/mÃªs
FASE CRESCIMENTO (10-50 campanhas/mÃªs):
â”œâ”€ Firebase: R$ 0,00
â”œâ”€ VPS: R$ 30,00
â”œâ”€ DomÃ­nio: R$ 3,33/mÃªs
â””â”€ TOTAL: R$ 33,33/mÃªs
FASE EXPANSÃƒO (50-100 campanhas/mÃªs):
â”œâ”€ Firebase Blaze: R$ 35,00
â”œâ”€ Forge + VPS: R$ 90,00
â”œâ”€ DomÃ­nio: R$ 3,33/mÃªs
â””â”€ TOTAL: R$ 128,33/mÃªs
âœ… Custo por campanha: R$ 1,28 (fase expansÃ£o)
âœ… Custo por doaÃ§Ã£o: R$ 0,004 (fase expansÃ£o)

---

## ğŸ¨ Interface e UX - Diretrizes de Design

### PrincÃ­pios de Design

#### 1. Mobile-First (80% dos acessos via celular)
```css
/* Breakpoints */
xs: 320px  (celulares pequenos)
sm: 640px  (celulares mÃ©dios)
md: 768px  (tablets)
lg: 1024px (desktops)
xl: 1280px (desktops grandes)
```

#### 2. Acessibilidade (WCAG 2.1 AA)
CONTRASTE:
âœ“ Texto normal: 4.5:1 mÃ­nimo
âœ“ Texto grande (18px+): 3:1 mÃ­nimo
âœ“ Elementos interativos: 3:1 mÃ­nimo
TAMANHOS:
âœ“ Fonte corpo: 16px mÃ­nimo
âœ“ BotÃµes: 18px fonte, 44Ã—44px Ã¡rea
âœ“ Links: 16px fonte, padding 8px
NAVEGAÃ‡ÃƒO:
âœ“ Tab index lÃ³gico
âœ“ Focus visÃ­vel (outline 2px)
âœ“ Skip links para navegaÃ§Ã£o rÃ¡pida

#### 3. Simplicidade Radical
REGRA DOS 3 CLIQUES:
Qualquer aÃ§Ã£o deve ser completada em mÃ¡ximo 3 cliques
â”œâ”€ Doar: Ver lista â†’ Escolher item â†’ Confirmar
â”œâ”€ Confirmar: Ver pendÃªncias â†’ Visualizar â†’ Confirmar
â””â”€ Criar campanha: Dashboard â†’ Nova â†’ Salvar
LINGUAGEM SIMPLES:
âœ“ NÃ­vel 5Âª sÃ©rie (Flesch Reading Ease > 60)
âœ“ Verbos diretos (Doar, Confirmar, Enviar)
âœ“ Evitar jargÃµes tÃ©cnicos
âœ— Evitar termos ambÃ­guos

### Componentes Principais

#### PÃ¡gina PÃºblica da Campanha
```html
<div class="campanha-publica">
  <!-- Header -->
  <header class="bg-gradient py-8">
    <h1 class="text-3xl font-bold">Campanha Natal 2025</h1>
    <p class="text-lg mt-2">Unidade SÃ£o Paulo - Centro</p>
    
    <!-- Progresso (se meta definida) -->
    <div class="progress-bar mt-4">
      <div class="progress-fill" style="width: 65%"></div>
      <span class="progress-label">R$ 6.500 de R$ 10.000</span>
    </div>
  </header>
  
  <!-- Lista de Itens -->
  <section class="lista-itens py-6">
    <!-- Item DisponÃ­vel -->
    <div class="item disponivel">
      <div class="item-info">
        <h3 class="text-xl">ğŸš Arroz 5kg</h3>
        <p class="text-sm text-gray-600">Faltam 15 unidades</p>
      </div>
      <button class="btn-doar bg-green-500">QUERO DOAR</button>
    </div>
    
    <!-- Item Prometido -->
    <div class="item prometido">
      <div class="item-info">
        <h3 class="text-xl">ğŸ¥« FeijÃ£o 2kg</h3>
        <p class="text-sm text-yellow-600">Maria prometeu (aguardando)</p>
      </div>
      <button class="btn-doar" disabled>PROMETIDO</button>
    </div>
    
    <!-- Item Completo -->
    <div class="item completo">
      <div class="item-info">
        <h3 class="text-xl">ğŸ§´ Ã“leo 900ml</h3>
        <p class="text-sm text-green-600">âœ“ Meta atingida! (20 entregues)</p>
      </div>
      <span class="badge-completo">âœ“ COMPLETO</span>
    </div>
  </section>
  
  <!-- Doar Dinheiro -->
  <section class="doar-dinheiro py-6 bg-gray-50">
    <h2 class="text-2xl font-bold mb-4">ğŸ’µ Ou doe em dinheiro</h2>
    <button class="btn-doar-dinheiro bg-blue-500 w-full">DOAR QUALQUER VALOR</button>
  </section>
  
  <!-- Ãšltimos Doadores -->
  <section class="ultimos-doadores py-6">
    <h3 class="text-lg font-semibold mb-3">â¤ï¸ Quem jÃ¡ ajudou:</h3>
    <div class="doadores-lista">
      <span class="doador-badge">Maria S.</span>
      <span class="doador-badge">JoÃ£o P.</span>
      <span class="doador-badge">Ana C.</span>
      <span class="doador-mais">+42 pessoas</span>
    </div>
  </section>
  
  <!-- Footer -->
  <footer class="py-6 text-center">
    <button class="btn-compartilhar">ğŸ“¤ Compartilhar Campanha</button>
    <p class="text-sm text-gray-500 mt-4">Powered by Listafacil</p>
  </footer>
</div>
```

#### Dashboard Admin
```html
<div class="admin-dashboard">
  <!-- Sidebar -->
  <aside class="sidebar">
    <nav>
      <a href="/dashboard" class="nav-item active">ğŸ“Š VisÃ£o Geral</a>
      <a href="/campanhas" class="nav-item">ğŸ¯ Campanhas</a>
      <a href="/doacoes" class="nav-item">
        ğŸ’ DoaÃ§Ãµes 
        <span class="badge-pendente">12</span>
      </a>
      <a href="/relatorios" class="nav-item">ğŸ“ˆ RelatÃ³rios</a>
      <a href="/configuracoes" class="nav-item">âš™ï¸ ConfiguraÃ§Ãµes</a>
    </nav>
  </aside>
  
  <!-- Main Content -->
  <main class="dashboard-content">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>Total Arrecadado</h3>
        <p class="stat-value">R$ 15.230,50</p>
        <span class="stat-change">+12% vs mÃªs passado</span>
      </div>
      
      <div class="stat-card">
        <h3>DoaÃ§Ãµes Este MÃªs</h3>
        <p class="stat-value">342</p>
        <span class="stat-change">+8% vs mÃªs passado</span>
      </div>
      
      <div class="stat-card urgente">
        <h3>Pendentes</h3>
        <p class="stat-value">12</p>
        <span class="stat-alert">âš ï¸ 3 urgentes</span>
      </div>
    </div>
    
    <!-- Campanhas Ativas -->
    <section class="campanhas-ativas mt-8">
      <h2>Campanhas Ativas</h2>
      
      <div class="campanha-card">
        <div class="campanha-header">
          <h3>Campanha Natal 2025</h3>
          <span class="status-badge ativa">Ativa</span>
        </div>
        
        <div class="campanha-stats">
          <div class="stat-mini">
            <span class="label">DoaÃ§Ãµes:</span>
            <span class="value">67</span>
          </div>
          <div class="stat-mini">
            <span class="label">Arrecadado:</span>
            <span class="value">R$ 5.230</span>
          </div>
          <div class="stat-mini urgente">
            <span class="label">Pendentes:</span>
            <span class="value">8</span>
          </div>
        </div>
        
        <div class="campanha-acoes">
          <button class="btn-secundario">Gerenciar</button>
          <button class="btn-primario">Ver DoaÃ§Ãµes</button>
        </div>
      </div>
    </section>
  </main>
</div>
```

---

## âœ… ConclusÃ£o e PrÃ³ximos Passos

### Resumo Executivo

**Listafacil v3.0** Ã© um sistema web robusto e escalÃ¡vel que resolve um problema real de 30.000+ associados de organizaÃ§Ãµes religiosas distribuÃ­das nacionalmente. A stack **Laravel + Firebase** foi estrategicamente escolhida para garantir:

âœ… **Custo Zero** (Free Tier suporta 50+ campanhas simultÃ¢neas)  
âœ… **Real-Time Nativo** (Firestore sincroniza instantaneamente)  
âœ… **Escalabilidade Horizontal** (suporta crescimento orgÃ¢nico)  
âœ… **Compliance Fiscal** (exportaÃ§Ã£o para balancete + retenÃ§Ã£o de 60 dias)  
âœ… **UX Simplificada** (doar em 3 cliques, sem login)  
âœ… **Multi-Unidade** (hierarquia nacional â†’ unidades â†’ campanhas)  

### Diferenciais TÃ©cnicos

1. **Arquitetura HÃ­brida:** Laravel (backend PHP confiÃ¡vel) + Firebase (real-time + storage)
2. **DoaÃ§Ã£o Friction-Free:** Zero cadastros, apenas nome
3. **PIN de EdiÃ§Ã£o:** Controle descentralizado sem login
4. **RetenÃ§Ã£o Inteligente:** Compliance LGPD automÃ¡tico
5. **Real-Time Dashboard:** Admin vÃª doaÃ§Ãµes aparecerem instantaneamente

### Roadmap Priorizado

**MVP (9 semanas):**  
âœ… AutenticaÃ§Ã£o + Multi-unidade  
âœ… Criar campanhas + Compartilhar  
âœ… Doar sem login + PIN  
âœ… Confirmar + Comprovantes  
âœ… Export + RetenÃ§Ã£o  

**v3.0 (ProduÃ§Ã£o):**  
âœ… Dashboard Nacional  
âœ… ConfirmaÃ§Ã£o em Lote  
âœ… Real-Time Completo  

**v4.0 (Futuro):**  
ğŸ”œ NotificaÃ§Ãµes Email/WhatsApp  
ğŸ”œ GrÃ¡ficos AvanÃ§ados  
ğŸ”œ SugestÃ£o de Itens  
ğŸ”œ Metas Nacionais  

### RecomendaÃ§Ãµes Finais

**Para Desenvolvimento:**
- Iniciar com MVP Core (Fase 1-3)
- TDD (Test-Driven Development) para regras crÃ­ticas
- Deploy contÃ­nuo (CI/CD com GitHub Actions)
- Monitoramento desde o dia 1 (Firebase Analytics)

**Para OperaÃ§Ã£o:**
- Iniciar no Free Tier (custo zero)
- Monitorar uso semanal (Firebase Console)
- Migrar para Blaze apenas quando necessÃ¡rio (>45 campanhas/mÃªs)
- Manter backups semanais (automÃ¡tico no Firebase)

**Para UX:**
- Testes de usabilidade com idosos (pÃºblico-alvo real)
- ProtÃ³tipos clicÃ¡veis (Figma) antes de codar
- Lighthouse Audit a cada sprint (performance)
- WCAG 2.1 AA compliance obrigatÃ³rio

---

**Documento preparado por:** Engenheiro Senior Laravel  
**VersÃ£o:** 3.0 (Janeiro 2025)  
**Status:** Pronto para implementaÃ§Ã£o  
**Estimativa total:** 210 horas (~6 semanas com 1 dev full-time)  
**Custo operacional:** R$ 33/mÃªs (MVP) | R$ 128/mÃªs (escala nacional)  

**Contato para dÃºvidas tÃ©cnicas:** desenvolvimento@listafacil.com.br

---

*Este documento Ã© um guia tÃ©cnico completo. Para questÃµes especÃ­ficas de implementaÃ§Ã£o, consulte a documentaÃ§Ã£o oficial de [Laravel](https://laravel.com/docs) e [Firebase](https://firebase.google.com/docs).*Claude Ã© uma IA e pode cometer erros. Por favor, verifique as respostas. Sonnet 4.5